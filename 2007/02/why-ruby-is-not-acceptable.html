<html> 
<head>
        
        <title>Why Ruby is not an acceptable implementation of Lisp</title>

	<link rel="stylesheet" type="text/css" href="/blog.css" />
	<link rel="stylesheet" type="text/css" href="/sunburst.css" />



	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>

	<div id="leftcontent">
			<a href="http://weblog.raganwald.com/"><img src="/assets/media/raganwald_2008_350_150.png" 
			width="350" height="150" border="0" alt="raganwald" title="raganwald 2008" align="middle"/></a><br/>
			
				<div class="DateHeader">Wednesday, February 07, 2007</div>
			

			<div class="Post"><a name="117088092580614361">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html" title="permanent link">Why Ruby is not an acceptable implementation of Lisp</a></span>
					<div style="clear:both;"></div>The other day, while actually writing software (as opposed to <em>talking about writing software</em>), I wrote the following:<br /><br /><pre><code>distance = lambda do |given_scale|<br />  (magnitudes.map { |pair| <br />    (pair.evidence - (pair.flow * given_scale)) ** 2 <br />  }).inject { |acc, distance| acc + distance }<br />end<br /></code></pre><br /><br />If you are curious, <code>distance</code> is a function that computes the distance between a curve (called a &#8216;flow&#8217;) and some evidence, given a float that scales the flow. It&#8217;s used for finding a curve that &#8216;looks like&#8217; a set of data points.<br /><br />Can you spot the bug? I&#8217;ll expunge all of the excess and give you some code you can try yourself:<br /><br /><pre><code>require 'test/unit'<br /><br />class TestRubyNames &lt; Test::Unit::TestCase<br /><br />  def test_lambda_clobbering<br />    foo = lambda { (1..3).map { |foo| foo ** 2 } }<br />    assert_nothing_raised(NoMethodError) { foo.call() }<br />    assert_raise(NoMethodError) { foo.call() } # WTF?<br />  end<br /><br />  def test_local_clobbering<br />    foo = [1, 4, 9]<br />    bar = lambda { (1..3).map { |foo| foo ** 2 } }<br />    bar.call<br />    assert_equal(3, foo) # WTF?<br />  end<br /><br />end<br /></code></pre><br /><br /><div class="book"><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://www.amazon.com/gp/product/0974514055?ie=UTF8&tag=raganwald001-20&amp;linkCode=as2&camp=1789&amp;creative=9325&creativeASIN=0974514055"><img style="" src="http://weblog.raganwald.com/uploaded_images/programming_ruby-742816.jpg" alt="" border="1" /></a><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://www.amazon.com/gp/product/0974514055?ie=UTF8&tag=raganwald001-20&amp;linkCode=as2&camp=1789&amp;creative=9325&creativeASIN=0974514055">Programming Ruby: The Second Edition</a> is an indispensable reference, especially to the latest libraries.<br /><br /></div>Is this what you expect? Ruby <em>looks</em> like a nice, block-structured language with lexical scope. But its standard implementation has serious issues. I believe these are <a href="http://eigenclass.org/hiki.rb?Changes+in+Ruby+1.9#l8">well-known and understood</a> issues, but issues nonetheless.<br /><br />One more example. I swore I wouldn&#8217;t write anything else about fixed-point combinators for a very long time, but try this exercise at home. Here&#8217;s my <a href="http://weblog.raganwald.com/2007/02/but-y-would-i-want-to-do-thing-like.html">curry combinator</a>:<br /><br /><pre><code>require 'test/unit'<br /><br />class ExempliGratia &lt; Test::Unit::TestCase<br /><br />  CURRY = lambda { |f, a| lambda { |*b| f.call(a, *b) } }<br /><br />  def test_clean_up_loose_ends<br />    maker = lambda { |f|<br />               lambda { |func_with_me| CURRY.call(func_with_me, func_with_me) }.call(<br />                    CURRY.call(lambda { |inner_func, me, *args|<br />                                inner_func.call(CURRY.call(me, me)).call(*args) }, f)) }<br /><br />    factorial = maker.call(<br />      lambda { |f| lambda { |n| n.zero? &amp;&amp; 1 or n * f.call(n-1) } }<br />    )<br />    assert_equal(120, factorial.call(5))<br />  end<br /><br />end<br /></code></pre><br /><br />Looks good. Now let&#8217;s prove that <code>CURRY</code> is referentially transparent by replacing every <code>CURRY</code> variable with the lambda:<br /><br /><pre><code>maker = lambda { |f|<br />           lambda { |func_with_me| (lambda { |f, a| lambda { |*b| f.call(a, *b) } }).call(func_with_me, func_with_me) }.call(<br />                (lambda { |f, a| lambda { |*b| f.call(a, *b) } }).call(lambda { |inner_func, me, *args|<br />                            inner_func.call((lambda { |f, a| lambda { |*b| f.call(a, *b) } }).call(me, me)).call(*args) }, f)) }<br /><br />factorial = maker.call(<br />  lambda { |f| lambda { |n| n.zero? &amp;&amp; 1 or n * f.call(n-1) } }<br />)<br /><br />begin<br />  factorial.call(5)<br />  puts 'fine'<br />rescue SystemStackError<br />  puts 'wtf?'<br />end<br /></code></pre><br /><br />Hunh? Ruby <em>looks like</em> a nice language supporting anonymous functions, but sometimes they work and sometimes they don&#8217;t. <strike>I strongly suspect that this issue has something to do with the fact that with the &#8216;naked&#8217; lambdas we&#8217;re creating new functions with every call, whereas the version using a <code>CURRY</code> variable re-uses the same function, so the system stack overflows in one case and not the other.</strike><br /><br /><strong>Update</strong>: Mike Harris proved that this second problem is the same as the first problem: once again, variables are clobbering each other all over the place. In Ruby 1.8, blocks do not create new scope, <i>at all</i>.<br /><br />Here's Mike's submission, indented to fit:<br /><br /><pre><code><br />def test_full_anonymity<br />  assert_equal(120, (lambda { |f0|<br />                       lambda { |func_with_me| <br />                         (lambda { |f1, a1| <br />                           lambda { |*b1| f1.call(a1, *b1) } <br />                         }).call(func_with_me, func_with_me) <br />                       }.call(<br />                            (lambda { |f2, a2| <br />                              lambda { |*b2| f2.call(a2, *b2) } <br />                            }).call(<br />                              lambda { |inner_func, me, *args|<br />                                inner_func.call(<br />                                  (lambda { |f3, a3| <br />                                    lambda { |*b3| f3.call(a3, *b3) } <br />                                  }).call(me, me)).call(*args) <br />                              }, f0)) <br />                    }).call(<br />    lambda { |f| lambda { |n| n.zero? && 1 or n * f.call(n-1) } }<br />  ).call(5))<br />end<br /></code></pre><br /><br /><strong>Stop your sobbing</strong><br /><br />I&#8217;m <em>not</em> saying Ruby is an unacceptable Ruby.<br /><br />I&#8217;m <em>especially not</em> saying &#8220;See, that&#8217;s why we should stick with language X.&#8221; If language X doesn&#8217;t even try to support this kind of programming, it&#8217;s a lame argument to say that it&#8217;s a better choice. That&#8217;s like saying that your 1972 <a href="http://en.wikipedia.org/wiki/Ford_Pinto" title="The barbecue that seats four.">Pinto</a> is safer than my 2004 MX-3 because the Pinto doesn&#8217;t have air bags, and air bags can injure small children if they are sitting in the passenger seat.<br /><br />If you try to bend Ruby to do Scheme-ish things, you will run into some corner cases, some places where it does the unexpected. Can you figure them out and avoid them (some people will say avoiding corner cases makes for a <a href="http://www.joelonsoftware.com/articles/LeakyAbstractions.html">Leaky Abstraction</a>)?<br /><br />I think if you&#8217;re writing Ruby code in Ruby, you can easily avoid these problems. That&#8217;s why Ruby is an acceptable Ruby.<br /><br /><strong>Why isn&rsquo;t Ruby an acceptable implementation of Lisp?</strong><br /><br />But why isn&rsquo;t Ruby an acceptable implementation of Lisp? (Besides the lack of support for <a href="http://www.cs.indiana.edu/scheme-repository/R4RS/r4rs_12.html">hygienic macros</a>, of course!)<br /><br /><div class="book"><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://www.amazon.com/gp/product/0130305529?ie=UTF8&tag=raganwald001-20&amp;linkCode=as2&camp=1789&amp;creative=9325&creativeASIN=0130305529"><img style="" src="http://weblog.raganwald.com/uploaded_images/on_lisp-725931.jpg" alt="" border="0" /></a><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://www.amazon.com/gp/product/0130305529?ie=UTF8&tag=raganwald001-20&amp;linkCode=as2&camp=1789&amp;creative=9325&creativeASIN=0130305529">On Lisp: Advanced Techniques for Common Lisp</a> is <b>the</b> definitive text on metaprogramming and macros. Although written for Common Lisp, its ideas are easily applicable to Scheme and even Ruby metaprogramming.<br /><br /></div>The problem is that Lisp or Lisp-style programming is all about metaprogramming. Code that writes code. Code that evals code. It&#8217;s easy to look at something like the curry combinator and say &#8220;no programmer would ever write that convoluted a function in production.&#8221; But macros and code generators routinely combine snippets of code to produce monstrosities that a human wouldn&#8217;t even considering writing.<br /><br />When writing a piece of code that writes code, you are heavily dependent on the underlying implementation being regular and corner-case free. The whole point of writing code-writing code is that you intend for it to generate variations and combinations on your templates or scaffolds. And it&#8217;s only a matter of time before you are combining template A with generator B and meta-programming method C.<br /><br />When the underlying language is robust, none of this matters. The result works. If you look at it under the hood, you&#8217;re horrified at the result. But frankly, that isn&#8217;t an argument against meta-programming, it&#8217;s an argument <em>for</em> it: let the machine do the dirty jobs we don&#8217;t want to do, and let us deal with a nice abstraction like <em>A plus B plus C</em> that just works, never mind what the code looks like.<br /><br />(Don&#8217;t even think about arguing that we should do away with code that writes code. That debate was won by the code generation folks back when COBOL and FORTRAN and ALGOL were young. From time to time you&#8217;re welcome to pull out your assembly if you like, but we use High Level Languages because we want the machine to write the messy crap for us.)<br /><br />My fear is that code that writes code might one day write code that clobbers a variable. <strike>Or code that writes code might write some nested lambdas that overflow the stack.</strike><br /><br />And that&#8217;s why Ruby is not an acceptable implementation of Lisp.<br /><br /><hr /><br />Well, ok, I confess: the title is a bit of muckraking. <a href="http://www.randomhacks.net/articles/2005/12/03/why-ruby-is-an-acceptable-lisp">Ruby is a pretty good implementation of Lisp</a>, and anyone who has two brains to rub together can point out that the issue is not whether there&#8217;s some corner case &#8220;gotcha,&#8221; but <a href="http://weblog.raganwald.com/2007/01/what-ive-learned-from-sales-part-ii.html">whether using Ruby is, on the whole, more beneficial than not using Ruby</a>.<br /><br />For what it&#8217;s worth, I consider corner cases like this a strong endorsement of trying new languages like Ruby: it&#8217;s like finding out that your sailplane has a tendency to go into an inverted flat spin when you loop at an unacceptably slow speed. It&#8217;s terrifying when it first happens, but you get through it and then you realize that the only reason you got into trouble was that you were pushing yourself hard.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://weblog.raganwald.com/labels/lispy.html">lispy</a>, <a rel='tag' href="http://weblog.raganwald.com/labels/ruby.html">ruby</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html" title="permanent link">3:03 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			
			    <div class="blogComments">
                                
                                <a name="comments"></a><strong>Comments on &ldquo;<em>Why Ruby is not an acceptable implementation of Lisp</em>&rdquo;</strong>:<br/>
						
							<div class="blogComment">
								<a name="117088623590122217"></a> 				Instead of a comment, how about soliciting some advice?! <BR/><BR/>I love your blog and the topics you cover. I'm pretty into code generation (if you're interested in generating and refactoring active data model based DSLs by simply modifying the documented abstract grammar of your DSLs, I'm your guy!). <BR/><BR/>That said, I wouldn't really consider myself much of a programmer having misspent most of my youth running everything from a psychotherapy practice to an ad agency. I wrote a simple IoC/DI framework in ColdFusion in 300 lines of code using mixins, but when people start to talk about lambdas, currying and closures my brain starts to fog!<BR/><BR/>And so to the questions. I've written in various shades of assembler, learn to hack in Basic and C, learnt to program in Pascal, and have delivered projects in VB4, ColdFusion4-7, classic ASP and a little bit of .NET (c#).<BR/><BR/>I want to expand my mind, so I'm looking at Lisp (probably Common Lisp), Haskell, and maybe some SmallTalk to enrich my brain and probably Ruby to augment my toolkit.<BR/><BR/>I would love to actually learn something that would allow me to generate cooler, more functional web applications in less time fairly quickly (still have to pay the bills) and would appreciate any suggestions you might make about how a poor old harassed PHB might better himself adding the most value to his brain in the least time.<BR/><BR/>Any thoughts much appreciated!<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170886200000#c117088623590122217" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="http://www.pbell.com" rel="nofollow">Peter Bell</a> : 5:10 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117088623590122217" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117088740204947904"></a> 				why not spend some time fixing your css ;)<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170887400000#c117088740204947904" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> : 5:30 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117088740204947904" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117089168114713507"></a> 				Yes, it looked very ironic when the text flowed into the sidebar and then a few lines down telling us to spot the bug!<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170891660000#c117089168114713507" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> : 6:41 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117089168114713507" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117089485788611268"></a> 				The broken case with the curry is another scoping issue (maybe the same one), due to the repeated declarations of f, a and b.  If you replace with distinct names, the function works.  <BR/><BR/>The initial_case can be shown with a reduced example<BR/><BR/>foo = [1,4,9]<BR/>(1..3).map { |foo| nil }<BR/>puts foo #3<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170894840000#c117089485788611268" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> : 7:34 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117089485788611268" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117089740588692401"></a> 				The first test case produces exactly the expected behavior.<BR/><BR/>Let's rewrite it with proc instead of lambda for a second to remove confusion. proc creates a closure over a scope with mutable variables. The code does what it says, it changes foo.<BR/><BR/>So the two questions are, why did Ruby decide to call procs lambdas? any why does Ruby not have lambdas of lambda-calculus?<BR/><BR/>The second example I skipped, that's the kind of code that if I ever had to read, I would flat out rewrite into something more maintainable.<BR/><BR/>The issue with code is not when it works, but when it fails. And when you're at the fifth level of abstraction, and something fails down underneath, then it's FORTH all the way down!<BR/><BR/>Is Ruby a better Lisp? Depends on your definition of "better". When it comes to pure form, I don't think so, I think it's a worse Lisp. But then again, it's one of those cases where worse is better.<BR/><BR/>For some people.<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170897360000#c117089740588692401" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="http://labnotes.org" rel="nofollow">assaf</a> : 8:16 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117089740588692401" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117090073227799499"></a> 				Ruby metaprogramming is a delicate art, if you want to stay out of a "flat spin." You can't just translate Lisp code verbatim to Ruby, and expect it to work perfectly.<BR/><BR/>But oftentimes, you can sneak up on the same problem from a different direction, using Ruby's native metaprogramming features.<BR/><BR/>I've had the best luck using test-driven design and refactoring when doing Ruby metaprogramming. I can't just design something in my head and write it down; it needs to grow organically.<BR/><BR/>I have a bunch of Ruby metaprogramming examples which I'll post on my blog at some point. But as you know, there's a bit of a queue...<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170900720000#c117090073227799499" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="http://www.randomhacks.net/" rel="nofollow">emk</a> : 9:12 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117090073227799499" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117090459202798194"></a> 				<I>The broken case with the curry is another scoping issue (maybe the same one), due to the repeated declarations of f, a and b. If you replace with distinct names, the function works.</I><BR/><BR/><B>Awesome insight, thanks!!!</B><BR/><BR/>I will update the text of the article as soon as I've tested the result.<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170904560000#c117090459202798194" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 10:16 PM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117090459202798194" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117090480918030310"></a> 				<I>it looked very ironic when the text flowed into the sidebar and then a few lines down telling us to spot the bug!</I><BR/><BR/>Q: How many programmers does it take to change a light bulb?<BR/><BR/>A: The light works in development!<BR/><BR/>Aren't you using a 30" Apple Cinema display???<BR/><BR/>That being said, code samples do not word wrap, although text does. I thought about the problem, and the best answer is probably to reformat the code to fit in a narrower column.<BR/><BR/>I'll try to get to that, thanks!<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170904800000#c117090480918030310" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 10:20 PM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117090480918030310" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117090560573448595"></a> 				<I>Ruby metaprogramming is a delicate art, if you want to stay out of a "flat spin." You can't just translate Lisp code verbatim to Ruby, and expect it to work perfectly.<BR/><BR/>But oftentimes, you can sneak up on the same problem from a different direction, using Ruby's native metaprogramming features.</I><BR/><BR/>I think we're in violent agreement!<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170905580000#c117090560573448595" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 10:33 PM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117090560573448595" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117090595537718179"></a> 				<I>I would love to actually learn something that would allow me to generate cooler, more functional web applications in less time fairly quickly (still have to pay the bills) and would appreciate any suggestions you might make about how a poor old harassed PHB might better himself adding the most value to his brain in the least time.</I><BR/><BR/>I would start my search over at <A HREF="http://programming.reddit.com" REL="nofollow">programming.reddit.com</A>.<BR/><BR/>You can post your question as an "Ask Reddit:" if you like. Others have posted similar questions. Try <A HREF="http://reddit.com/search?q=ask+reddit+language" REL="nofollow">this search</A> and see if any of the results are interesting.<BR/><BR/>Good luck, and email me if you have trouble getting a good answer. You know my first name is "reg" and you know my domain!<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170905940000#c117090595537718179" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 10:39 PM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117090595537718179" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117093007261089264"></a> 				Thanks - I'll go get searching!<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170930060000#c117093007261089264" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="http://www.pbell.com" rel="nofollow">Peter Bell</a> : 5:21 AM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117093007261089264" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117095404856833823"></a> 				<I>anyone who has two brains to rub together</I><BR/><BR/>I'm damn near certain you mean two brain cells. Although if you really do expect the average human to have more than one brain, that would explain your blog pretty succinctly.<BR/><BR/>Anyway, there was a "why Ruby is an acceptable Lisp" a while back, I'm glad to see this as a counter-arg. My Lisp-fu still needs developing, but looking at Lisp/Ruby translation attempts seems to result in a better understanding of Ruby's innards.<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170954000000#c117095404856833823" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="http://gilesbowkett.blogspot.com" rel="nofollow">Giles Bowkett</a> : 12:00 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117095404856833823" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117095696565278367"></a> 				<I>The broken case with the curry is another scoping issue (maybe the same one), due to the repeated declarations of f, a and b. If you replace with distinct names, the function works.</I><BR/><BR/>I've tried that, and so far it doesn't work, although I am now getting different errors.<BR/><BR/>If you've tried it and gotten it to work, can you email or post your code?<BR/><BR/>Perhaps I have a PBKAC?<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170956940000#c117095696565278367" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 12:49 PM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117095696565278367" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117096593350923004"></a> 				To fix the problem with code overflowing into the sidebar, just add this to your CSS:<BR/><BR/>pre code {<BR/>   display: block;<BR/>   overflow: auto;<BR/>}<BR/><BR/>That will give you a horizontal scroll bar on just the code block when necessary.<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170965880000#c117096593350923004" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> : 3:18 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117096593350923004" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="117098756179784444"></a> 				Don't know if I can do anything about the formatting.  Paste into your text editor of choice<BR/><BR/>class ExempliGratiaNoCurryVariableOrMethod < Test::Unit::TestCase<BR/><BR/>  def test_clean_up_loose_ends<BR/>    maker = lambda { |f0|<BR/>           lambda { |func_with_me| (lambda { |f1, a1| lambda { |*b1| f1.call(a1, *b1) } }).call(func_with_me, func_with_me) }.call(<BR/>                (lambda { |f2, a2| lambda { |*b2| f2.call(a2, *b2) } }).call(lambda { |inner_func, me, *args|<BR/>                            inner_func.call((lambda { |f3, a3| lambda { |*b3| f3.call(a3, *b3) } }).call(me, me)).call(*args) }, f0)) }<BR/><BR/>    factorial = maker.call(<BR/>      lambda { |f| lambda { |n| n.zero? && 1 or n * f.call(n-1) } }<BR/>    )  <BR/>    assert_equal(120, factorial.call(5))<BR/>  end<BR/><BR/>end<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1170987540000#c117098756179784444" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> : 9:19 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=117098756179784444" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="4559850048129826208"></a> 				This problem is fixed in 1.9 -- blocks are lexically scoped.<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1198821060000#c4559850048129826208" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> : 12:51 AM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=4559850048129826208" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="5687033085424033761"></a> 				Compilers generate code that nobody is ever expected to see. Except a few gurus in debugging.  I've used machine-level debuggers on compiled C code. Trust me, you don't want to do it.<BR/><BR/>It ain't the same thing as lisp generating lisp.<BR/><BR/>People used to write assembler programs that modified themselves at run time.  It was never re-entrant, of course.<BR/><BR/>There are different kinds of code gen.  So your argument "Don't even think of arguing against generated code" doesn't work.<BR/><BR/>I'm sure C compilers are tested more thoroughly than lisp coders test their macros.<br />
								<div class="byline"><a href="http://weblog.raganwald.com/2007/02/why-ruby-is-not-acceptable.html?showComment=1201130100000#c5687033085424033761" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/17440467058108985654" rel="nofollow">InternetFred</a> : 6:15 PM</div>

								<span class="item-control blog-admin pid-399548678"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=5687033085424033761" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
						
					  
					<br /> <p id="postfeeds"></p> <br />
					

					<br /> <br />
					<a href="http://weblog.raganwald.com/welcome.html">&lt;&lt; Home</a>
				</div>

			

		


	</div>







	<div id="rightcontent">

		<div class="SideBarTitle"><a href="http://braythwayt.com">Reg Braithwaite</a></div>

		<br />

		<br />

		<div class="SideBarTitle">Recent Writing</div>

                <a href="http://homoiconic.com">Homoiconic Technical Writing</a> / <a href ="http://raganwald.posterous.com">raganwald.posterous.com</a><br>
			<br>
			<div class="SideBarTitle">
				Books
			</div><a href="http://leanpub.com/shippingsoftware" title="A quarter-century of experience shipping software, distilled into fixnum bittersweet essays">What I&lsquo;ve Learned From Failure</a> / <a href="http://leanpub.com/combinators" title="Raganwald's collected adventures in Combinatory Logic and Ruby Meta-Programming">Kestrels, Quirky Birds, and Hopeless Egocentricity</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Share</div>

                <a href="http://github.com/raganwald/rewrite_rails">rewrite_rails</a> /

                <a href="http://github.com/raganwald/andand">andand</a> /

                <a href="http://raganwald.com/source/unfold.rb.html">unfold.rb</a> /

                <a href="http://raganwald.com/source/string_to_proc.rb.html">string_to_proc.rb</a> /

                <a href="http://raganwald.com/source/dsl_and_let.html">dsl_and_let.rb</a> /

                <a href="http://raganwald.com/source/comprehensions.html">comprehension.rb</a> /

                <a href="http://raganwald.com/source/lazy_lists.html">lazy_lists.rb</a>

		<br />

		<br />

		<div class="SideBarTitle">Beauty</div> <!-- idioms -->

		<a href="http://weblog.raganwald.com/2008/04/is-strictly-equivalent-to.html">IS-STRICTLY-EQUIVALENT-TO-A</a> /

		<a href="http://weblog.raganwald.com/2008/03/spaghetti-western-coding.html">Spaghetti-Western Coding</a> /

		<a href="http://weblog.raganwald.com/2007/12/golf-is-good-program-spoiled.html">Golf is a good program spoiled</a> /

		<a href="http://weblog.raganwald.com/2007/11/programming-conventions-as-signals.html">Programming conventions as signals</a> /

                <a href="http://weblog.raganwald.com/2007/10/too-much-of-good-thing-not-all.html">Not all functions should be object methods</a>

<br/><br/>

                <a href="http://weblog.raganwald.com/2007/05/not-so-big-software-application.html">The Not So Big Software Design</a> /

		<a href="http://weblog.raganwald.com/2007/04/writing-programs-for-people-to-read.html">Writing programs for people to read</a> /
                
		<a href="http://weblog.raganwald.com/2007/03/why-why-functional-programming-matters.html">Why Why Functional Programming Matters Matters</a> /

		<a href="http://weblog.raganwald.com/2007/02/but-y-would-i-want-to-do-thing-like.html">But Y would I want to do a thing like this?</a>

		<br />

		<br />

		<div class="SideBarTitle">Work</div>

                <a href="http://weblog.raganwald.com/2008/04/single-most-important-thing-you-must-do.html">The single most important thing you must do to improve your programming career</a> /

                <a href="http://weblog.raganwald.com/2008/02/naive-approach-to-hiring-people.html">The Na&iuml;ve Approach to Hiring People</a> /

                <a href="http://weblog.raganwald.com/2008/01/no-disrespect.html">No Disrespect</a> /

		<a href="http://weblog.raganwald.com/2006/11/take-control-of-your-interview.html">Take control of your interview</a> /

		<a href="http://weblog.raganwald.com/2006/08/three-tips-for-getting-job-through.html">Three tips for getting a job through a recruiter</a> /

		<a href="http://weblog.raganwald.com/2006/06/my-favourite-interview-question.html">My favourite interview question</a>

                <br/>

                <br/>



		<div class="SideBarTitle">Management</div>

		<a href="http://weblog.raganwald.com/2008/02/exception-handling-in-software.html">Exception Handling in Software Development</a> /

		<a href="http://weblog.raganwald.com/2007/11/what-if-powerful-languages-and-idioms.html">What if powerful languages and idioms only work for small teams?</a> /

                <a href="http://weblog.raganwald.com/2007/08/bricks.html">Bricks</a> /

                <a href="http://weblog.raganwald.com/2007/06/which-theory-first-evidence.html">Which theory fits the evidence?</a> /

                <a href="http://weblog.raganwald.com/2007/06/still-failing-still-learning.html">Still failing, still learning</a> /

		<a href="http://weblog.raganwald.com/2005/01/what-ive-learned-from-failure.html">What I&rsquo;ve learned from failure</a>

		<br />

		<br />

		<div class="SideBarTitle">Notation</div> <!-- languages -->

		<a href="http://weblog.raganwald.com/2008/06/what-does-do-when-used-as-unary.html">The unary ampersand in Ruby</a> /

		<a href="http://weblog.raganwald.com/2008/02/1100inject.html">(1..100).inject(&amp;:+)</a> /

                <a href="http://weblog.raganwald.com/2007/10/challenge-of-teaching-yourself.html">The challenge of teaching yourself a programming language</a> /

                <a href="http://weblog.raganwald.com/2006/11/significance-of-meta-circular_22.html">The significance of the meta-circular interpreter</a> /
                
                <a href="http://weblog.raganwald.com/2007/08/block-structured-javascript.html">Block-Structured Javascript</a> /

                <a href="http://weblog.raganwald.com/2007/02/haskell-ruby-and-infinity.html">Haskell, Ruby and Infinity</a> /

		<a href="http://weblog.raganwald.com/2007/01/closures-and-higher-order-functions.html">Closures and Higher-Order Functions</a>

		<br />

		<br />

		<div class="SideBarTitle">Opinion</div>

		<a href="http://weblog.raganwald.com/2008/05/why-apple-is-more-expensive-than-amazon.html">Why Apple is more expensive than Amazon</a> /

		<a href="http://weblog.raganwald.com/2008/04/why-we-are-biggest-obstacle-to-our-own.html">Why we are the biggest obstacles to our own growth</a> /

		<a href="http://weblog.raganwald.com/2008/03/process-is-to-software-as-software-is.html">Is software the documentation of business process mistakes?</a> /

		<a href="http://weblog.raganwald.com/2007/09/we-have-lost-control-of-apparatus.html">We have lost control of the apparatus</a> /

		<a href="http://weblog.raganwald.com/2007/01/what-ive-learned-from-sales-part-i.html">What I&rsquo;ve Learned From Sales</a>
                <a href="http://weblog.raganwald.com/2007/01/what-ive-learned-from-sales-part-i.html" title="What I've Learned From Sales, Part I: Don't Feed the Trolls">I</a>, 
                <a href="http://weblog.raganwald.com/2007/01/what-ive-learned-from-sales-part-ii.html" title="What I've Learned from Sales, Part II: Wanna Bet?">II</a>, 
                <a href="http://weblog.raganwald.com/2007/10/how-to-use-blunt-instrument-to-sharpen.html" title="What I've Learned from Sales, Part III: How to use a blunt instrument to sharpen your saw">III</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Whimsey</div>

                <a href="http://weblog.raganwald.com/2008/05/narcissism-of-small-code-differences.html">The Narcissism of Small Code Differences</a> /

		<a href="http://weblog.raganwald.com/2008/01/billy-martins-technique-for-managing.html">Billy Martin&rsquo;s Technique for Managing his Manager</a> /

		<a href="http://weblog.raganwald.com/2007/10/three-stories-about-tao.html">Three stories about The Tao</a> /

		<a href="http://weblog.raganwald.com/2007/02/programming-language-stories.html">Programming Language Stories</a> /

		<a href="http://weblog.raganwald.com/2005/07/why-you-need-degree-to-work-for-bigco.html">Why You Need a Degree to Work For BigCo</a>

		<br />

		<br />

		<div class="SideBarTitle">History</div>

		
			<a href="http://weblog.raganwald.com/archives/2004_06_01_archive.html">06/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2004_07_01_archive.html">07/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2004_08_01_archive.html">08/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2004_09_01_archive.html">09/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2004_10_01_archive.html">10/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2004_11_01_archive.html">11/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2004_12_01_archive.html">12/04</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_01_01_archive.html">01/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_02_01_archive.html">02/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_03_01_archive.html">03/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_04_01_archive.html">04/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_06_01_archive.html">06/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_07_01_archive.html">07/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_08_01_archive.html">08/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_09_01_archive.html">09/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_10_01_archive.html">10/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2005_11_01_archive.html">11/05</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_01_01_archive.html">01/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_02_01_archive.html">02/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_03_01_archive.html">03/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_04_01_archive.html">04/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_05_01_archive.html">05/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_06_01_archive.html">06/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_07_01_archive.html">07/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_08_01_archive.html">08/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_09_01_archive.html">09/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_10_01_archive.html">10/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_11_01_archive.html">11/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2006_12_01_archive.html">12/06</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_01_01_archive.html">01/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_02_01_archive.html">02/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_03_01_archive.html">03/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_04_01_archive.html">04/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_05_01_archive.html">05/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_06_01_archive.html">06/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_07_01_archive.html">07/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_08_01_archive.html">08/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_09_01_archive.html">09/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_10_01_archive.html">10/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_11_01_archive.html">11/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2007_12_01_archive.html">12/07</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_01_01_archive.html">01/08</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_02_01_archive.html">02/08</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_03_01_archive.html">03/08</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_04_01_archive.html">04/08</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_05_01_archive.html">05/08</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_06_01_archive.html">06/08</a> /
		
			<a href="http://weblog.raganwald.com/archives/2008_07_01_archive.html">07/08</a> /
		
		
		<br/></p>
		<br/>

		

	</div>





	<div style="visibility: hidden">
		
		
		<script type="text/javascript" src="http://www.assoc-amazon.com/s/link-enhancer?tag=raganwald001-20">
		</script>
		<noscript>
			<img src="http://www.assoc-amazon.com/s/noscript?tag=raganwald001-20" alt="" />
		</noscript>
	</div>

</body>
</html>